<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Game Ti√™u Di·ªát T·∫ø B√†o Ung Th∆∞</title>
<style>
body{
 margin:0;font-family:Arial;
 background:radial-gradient(circle,#0f2027,#203a43,#2c5364);
 color:white;text-align:center
}
.hidden{display:none}
h1{color:#ff5252}

#bags{
 max-width:720px;margin:30px auto;
 display:grid;grid-template-columns:repeat(4,1fr);gap:20px
}
.bag{
 background:rgba(255,255,255,.15);
 border-radius:20px;padding:20px;
 cursor:pointer;transition:.3s
}
.bag:hover{transform:scale(1.1)}
.bag span{font-size:48px}

#questionBox{
 max-width:900px;margin:30px auto;
 background:rgba(0,0,0,.45);
 padding:25px;border-radius:20px
}
.option{
 background:#1e3c72;padding:12px;
 margin:10px 0;border-radius:12px;
 cursor:pointer
}
.option:hover{background:#2a5298}
.wrong{background:#e74c3c!important;animation:shake .4s}
.correct{background:#2ecc71!important}

.statement{
 background:#102542;padding:12px;
 margin:10px 0;border-radius:12px;
 display:flex;justify-content:space-between;align-items:center
}
.tf button{
 padding:6px 14px;border:none;
 border-radius:20px;margin-left:8px;
 cursor:pointer
}

input{
 padding:10px;width:80%;
 border-radius:10px;border:none
}
button{
 padding:10px 18px;border:none;
 border-radius:20px;cursor:pointer;
 font-weight:bold;margin:6px
}

#virus{font-size:120px;animation:pop .6s}
@keyframes pop{50%{transform:scale(1.4)}}
@keyframes shake{
 25%{transform:translateX(-6px)}
 50%{transform:translateX(6px)}
 75%{transform:translateX(-6px)}
}
</style>
</head>
<body>

<h1>üß¨ GAME TI√äU DI·ªÜT T·∫æ B√ÄO UNG TH∆Ø</h1>

<div id="home"><div id="bags"></div></div>
<div id="question" class="hidden"><div id="questionBox"></div></div>
<div id="success" class="hidden"><div id="virus">ü¶†</div><h2>TI√äU DI·ªÜT TH√ÄNH C√îNG!</h2></div>

<audio id="sound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2c7e6d9b1b.mp3"></audio>

<script>
const bagsDiv=document.getElementById("bags");
const qBox=document.getElementById("questionBox");
const home=document.getElementById("home");
const question=document.getElementById("question");
const successBox=document.getElementById("success");
const sound=document.getElementById("sound");

let destroyed=[];

/* ===== C√ÇU H·ªéI ‚Äì ƒê√ÅP √ÅN CHU·∫®N ===== */
let pool=[
 {type:"mc",q:"Gen ƒë·ªôt bi·∫øn ph·ªï bi·∫øn nh·∫•t trong ung th∆∞ ng∆∞·ªùi?",
  o:["p53","rRNA","tRNA","lacZ"],a:0},

 {type:"mc",q:"Oncogene c√≥ ngu·ªìn g·ªëc t·ª´?",
  o:["Proto-oncogene","Plasmid","Operon","Gen c·∫•u tr√∫c"],a:0},

 {type:"mc",q:"C∆° ch·∫ø ch√≠nh c·ªßa x·∫° tr·ªã ung th∆∞?",
  o:["G√¢y ƒë·ª©t g√£y m·∫°ch ƒë√¥i DNA","ƒê√¥ng protein","Ph√° m√†ng t·∫ø b√†o","·ª®c ch·∫ø ribosome"],a:0},

 {type:"short",q:"Qu√° tr√¨nh t·∫ø b√†o t·ª± ch·∫øt c√≥ ki·ªÉm so√°t g·ªçi l√† g√¨?",
  a:"apoptosis"},

 {type:"short",q:"Gen ·ª©c ch·∫ø kh·ªëi u li√™n quan ung th∆∞ v√∫ di truy·ªÅn?",
  a:"brca1"},

 {type:"short",q:"ƒê·ªôt bi·∫øn x·∫£y ra ·ªü t·∫ø b√†o soma g·ªçi l√† g√¨?",
  a:"ƒë·ªôt bi·∫øn soma"},

 {type:"tf",q:"C∆° ch·∫ø ph√¢n t·ª≠ c·ªßa ung th∆∞",s:[
  ["ƒê·ªôt bi·∫øn p53 l√†m m·∫•t ki·ªÉm so√°t chu k√¨ t·∫ø b√†o",true],
  ["Oncogene c·∫ßn c·∫£ hai alen b·ªã ƒë·ªôt bi·∫øn",false],
  ["Apoptosis th∆∞·ªùng b·ªã ·ª©c ch·∫ø trong t·∫ø b√†o ung th∆∞",true],
  ["Ung th∆∞ kh√¥ng li√™n quan ƒë·∫øn ƒë·ªôt bi·∫øn DNA",false]
 ]},

 {type:"tf",q:"ƒêi·ªÅu tr·ªã ung th∆∞ hi·ªán ƒë·∫°i",s:[
  ["X·∫° tr·ªã g√¢y ƒë·ª©t g√£y m·∫°ch ƒë√¥i DNA",true],
  ["H√≥a tr·ªã ch·ªâ t√°c ƒë·ªông t·∫ø b√†o ung th∆∞",false],
  ["Mi·ªÖn d·ªãch tr·ªã li·ªáu k√≠ch ho·∫°t t·∫ø b√†o T",true],
  ["Li·ªáu ph√°p ƒë√≠ch nh·∫Øm protein ƒë·∫∑c hi·ªáu",true]
 ]}
];

function renderBags(){
 bagsDiv.innerHTML="";
 for(let i=0;i<8;i++){
  if(destroyed.includes(i)) continue;
  bagsDiv.innerHTML+=`
   <div class="bag" onclick="openBag(${i})">
    <span>ü¶†</span><br>T·∫ø b√†o ${i+1}
   </div>`;
 }
}

function openBag(i){
 const q=pool[i];
 if(!q) return;

 home.classList.add("hidden");
 question.classList.remove("hidden");
 qBox.innerHTML="<h2>"+q.q+"</h2>";

 if(q.type==="mc"){
  q.o.forEach((op,idx)=>{
   const d=document.createElement("div");
   d.className="option";
   d.innerHTML=`<b>${"ABCD"[idx]}.</b> ${op}`;
   d.onclick=()=>{
    if(idx===q.a){
     d.classList.add("correct");
     win(i);
    }else{
     flash(d);
    }
   };
   qBox.appendChild(d);
  });
 }

 if(q.type==="short"){
  qBox.innerHTML+=`
   <input id="ans">
   <br>
   <button onclick="checkShort(${i},'${q.a}')">X√°c nh·∫≠n</button>
   <button onclick="document.getElementById('real').classList.toggle('hidden')">Xem ƒë√°p √°n</button>
   <div id="real" class="hidden">ƒê√°p √°n: ${q.a}</div>`;
 }

 if(q.type==="tf"){
  let correctSet=new Set();
  q.s.forEach(([t,a],idx)=>{
   const row=document.createElement("div");
   row.className="statement";
   row.innerHTML=`${t}
    <div class="tf">
     <button>ƒê√∫ng</button>
     <button>Sai</button>
    </div>`;
   const [bT,bF]=row.querySelectorAll("button");

   bT.onclick=()=>handleTF(idx,a,true,bT);
   bF.onclick=()=>handleTF(idx,a,false,bF);

   qBox.appendChild(row);
  });

  function handleTF(id,ans,choose,btn){
   if(ans===choose && !correctSet.has(id)){
    correctSet.add(id);
    btn.classList.add("correct");
    if(correctSet.size===4) win(i);
   }else if(ans!==choose){
    flash(btn);
   }
  }
 }
}

function flash(el){
 el.classList.add("wrong");
 setTimeout(()=>el.classList.remove("wrong"),400);
}

function checkShort(i,a){
 const v=document.getElementById("ans").value.toLowerCase().trim();
 if(v===a) win(i);
 else flash(document.getElementById("ans"));
}

function win(i){
 sound.play();
 destroyed.push(i);
 pool[i]=null;
 question.classList.add("hidden");
 successBox.classList.remove("hidden");
 setTimeout(()=>{
  successBox.classList.add("hidden");
  home.classList.remove("hidden");
  renderBags();
 },1200);
}

renderBags();
</script>
</body>
</html>
